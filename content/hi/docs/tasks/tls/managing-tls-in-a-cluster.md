---
title: क्लस्टर में TLS प्रमाणपत्र प्रबंधित करें
content_type: task
reviewers:
- mikedanese
- beacham
- liggitx
---

<!-- overview -->

कुबरनेट्स एक `certificates.k8s.io` API प्रदान करता है, जो आपको एक ऐसे Certificate Authority (CA) द्वारा हस्ताक्षरित TLS प्रमाणपत्र जारी करने की अनुमति देता है जिसे आप नियंत्रित करते हैं। ये CA और प्रमाणपत्र आपके वर्कलोड्स को ट्रस्ट स्थापित करने में मदद करते हैं।

`certificates.k8s.io` API एक ऐसे प्रोटोकॉल का उपयोग करता है जो [ACME
ड्राफ्ट](https://github.com/ietf-wg-acme/acme/) के समान है।


{{< note >}}
certificates.k8s.io API का उपयोग करके बनाए गए प्रमाणपत्र एक समर्पित CA
द्वारा हस्ताक्षरित होते हैं। आप अपने क्लस्टर को क्लस्टर रूट CA का उपयोग करने के लिए कॉन्फ़िगर
कर सकते हैं, लेकिन आपको इस पर निर्भर नहीं रहना चाहिए। यह मान लेना कि ये प्रमाणपत्र क्लस्टर
रूट CA के खिलाफ सत्यापित होंगे, एक सुरक्षित धारणा नहीं है।
{{< /note >}}




## {{% heading "आवश्यक शर्तें" %}}


{{< include "task-tutorial-prereqs.md" >}}

आपको `cfssl` टूल की आवश्यकता है। आप `cfssl` को
https://github.com/cloudflare/cfssl/releases से डाउनलोड कर सकते हैं।

इस पृष्ठ के कुछ चरणों में `jq` टूल का उपयोग किया गया है। यदि आपके पास `jq` नहीं है, तो आप
इसे अपने ऑपरेटिंग सिस्टम के सॉफ़्टवेयर स्रोतों के माध्यम से इंस्टॉल कर सकते हैं, या इसे
https://jqlang.github.io/jq/ से प्राप्त कर सकते हैं।

<!-- steps -->

## क्लस्टर में TLS पर भरोसा करना

पॉड के रूप में चल रहे एप्लिकेशन से कस्टम CA पर भरोसा करने के लिए आमतौर पर
कुछ अतिरिक्त एप्लिकेशन कॉन्फ़िगरेशन की आवश्यकता होती है। आपको CA प्रमाणपत्र बंडल
को उन CA प्रमाणपत्रों की सूची में जोड़ना होगा जिन पर TLS क्लाइंट या सर्वर भरोसा करता है। उदाहरण
के लिए, आप इसे गोलंग TLS कॉन्फ़िगरेशन के साथ प्रमाणपत्र श्रृंखला को पार्स करके और पार्स किए गए
प्रमाणपत्रों को `tls.Config` स्ट्रक्ट में `RootCAs` फ़ील्ड में जोड़कर करेंगे।

{{< note >}}
भले ही कस्टम CA प्रमाणपत्र फ़ाइल सिस्टम में शामिल हो सकता है (ConfigMap `kube-root-ca.crt` में),
आपको उस प्रमाणपत्र प्राधिकरण का उपयोग आंतरिक कुबरनेट्स एंडपॉइंट्स को सत्यापित करने के अलावा
किसी अन्य उद्देश्य के लिए नहीं करना चाहिए। आंतरिक कुबरनेट्स एंडपॉइंट का एक उदाहरण डिफ़ॉल्ट
नेमस्पेस में `kubernetes` नामक सर्विस है।

यदि आप अपने वर्कलोड के लिए कस्टम प्रमाणपत्र प्राधिकरण का उपयोग करना चाहते हैं, तो आपको
उस CA को अलग से उत्पन्न करना चाहिए, और उसके CA प्रमाणपत्र को एक
ConfigMap का उपयोग करके वितरित करना चाहिए
जिसे आपके पॉड्स पढ़ सकते हैं।
{{< /note >}}

## प्रमाणपत्र का अनुरोध करना

निम्नलिखित अनुभाग दर्शाता है कि DNS के माध्यम से एक्सेस की जाने वाली कुबरनेट्स सर्विस के लिए TLS प्रमाणपत्र कैसे बनाया जाए।

{{< note >}}
यह ट्यूटोरियल CFSSL का उपयोग करता है: Cloudflare का PKI और TLS टूलकिट, अधिक जानने के लिए यहां क्लिक करें।
{{< /note >}}

## प्रमाणपत्र हस्ताक्षर अनुरोध (CSR) बनाएं

निम्नलिखित कमांड चलाकर एक निजी कुंजी और प्रमाणपत्र हस्ताक्षर अनुरोध (या CSR) उत्पन्न करें:

```shell
cat <<EOF | cfssl genkey - | cfssljson -bare server
{
  "hosts": [
    "my-svc.my-namespace.svc.cluster.local",
    "my-pod.my-namespace.pod.cluster.local",
    "192.0.2.24",
    "10.0.34.2"
  ],
  "CN": "my-pod.my-namespace.pod.cluster.local",
  "key": {
    "algo": "ecdsa",
    "size": 256
  }
}
EOF
